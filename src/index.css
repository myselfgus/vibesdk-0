@import 'tailwindcss';
@import "tw-animate-css";

@font-face{
  font-family: "departureMono";
  src:  url('./assets/fonts/DepartureMono-Regular.woff') 
}

/* Subtle chat edge throb effect - Health Teal */
@keyframes chat-edge-throb {
  0%, 100% {
    box-shadow:
      0 0 0 0 rgba(0, 168, 150, 0.10),
      inset 0 0 0 1px rgba(0, 168, 150, 0.16);
  }
  50% {
    box-shadow:
      0 0 0 6px rgba(0, 184, 165, 0.08),
      inset 0 0 0 2px rgba(0, 184, 165, 0.22);
  }
}

.chat-edge-throb {
  animation: chat-edge-throb 1.6s ease-in-out infinite;
  border-radius: 0.75rem; /* rounded-xl */
}

@media (prefers-reduced-motion: reduce) {
  .chat-edge-throb { animation: none; }
}

/* Debug mode pulsing effect - red edges */
@keyframes debug-pulse {
  0%, 100% {
    box-shadow:
      inset 4px 0 12px rgba(239, 68, 68, 0.1),
      inset -4px 0 12px rgba(239, 68, 68, 0.1);
  }
  50% {
    box-shadow:
      inset 4px 0 20px rgba(239, 68, 68, 0.2),
      inset -4px 0 20px rgba(239, 68, 68, 0.2);
  }
}

.animate-debug-pulse {
  animation: debug-pulse 2s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-debug-pulse { animation: none; }
}

/* Custom scrollbar for debug bubble */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(239, 68, 68, 0.3);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(239, 68, 68, 0.5);
}

.dark .custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(239, 68, 68, 0.4);
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(239, 68, 68, 0.6);
}

@custom-variant dark (&:is(.dark *));
@plugin '@tailwindcss/typography';
@theme inline {
	--radius-sm:
		calc(var(--radius) - 4px);
	--radius-md:
		calc(var(--radius) - 2px);
	--radius-lg:
		var(--radius);
	--radius-xl:
		calc(var(--radius) + 4px);
	--radius-20px: 20px;
	--radius-24px: 24px;
	--color-accent:
		var(--build-accent-color);
	--color-destructive:
		var(--destructive);
	--color-input:
		var(--input);
	--color-ring:
		var(--ring);
	--shadow-textarea:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--color-bg-1: var(--build-chat-colors-bg-1);
	--color-bg-2: var(--build-chat-colors-bg-2);
	--color-bg-3: var(--build-chat-colors-bg-3);
	--color-bg-4: var(--build-chat-colors-bg-4);
	--color-border-primary: var(--build-chat-colors-border-primary);
	--color-border-secondary: var(--build-chat-colors-border-secondary);
	--color-border-tertiary: var(--build-chat-colors-border-tertiary);
	--color-danger: var(--build-chat-colors-danger);
	--color-brand-heavy: var(--build-chat-colors-brand-heavy);
	--color-brand-primary: var(--build-chat-colors-brand-primary);
	--color-brand-subtle: var(--build-chat-colors-brand-subtle);
	--color-text-inverted: var(--build-chat-colors-text-inverted);
	--color-text-primary: var(--build-chat-colors-text-primary);
	--color-text-secondary: var(--build-chat-colors-text-secondary);
	--color-text-tertiary: var(--build-chat-colors-text-tertiary);

	/* Health Design System Colors */
	--color-health-bg: #F8F8F6;
	--color-health-dark: #1A1A18;
	--color-health-teal: #00A896;
	--color-health-danger: #C44536;
	--color-health-text-sub: #6B6B66;

	--shadow-textarea:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--animate-typing-dot: typing-dot 1.2s ease-in-out infinite;
	--animate-shake: shake 1s ease-in-out;
	--animate-siri-wave: siriWave 1.4s ease-in-out infinite;
	--animate-fade-up: fadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
	--animate-scale-in-fast: scaleIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
	--animate-float: float 4s ease-in-out infinite;
}


:root {
	--radius:
		0.625rem;
	--destructive:
		#C44536;
	--border:
		rgba(255, 255, 255, 0.5);
	--input:
		#F4F4F2;
	--ring:
		#00A896;
	--build-accent-color: #00A896;
	--build-chat-colors-bg-1: #ECECEA;
	--build-chat-colors-bg-2: #F2F2EE;
	--build-chat-colors-bg-3: #F8F8F6;
	--build-chat-colors-bg-4: #FFFFFF;
	--build-chat-colors-border-primary: rgba(255, 255, 255, 0.5);
	--build-chat-colors-border-secondary: rgba(255, 255, 255, 0.4);
	--build-chat-colors-border-tertiary: rgba(0, 0, 0, 0.06);
	--build-chat-colors-danger: #C44536;
	--build-chat-colors-brand-heavy: #009688;
	--build-chat-colors-brand-primary: #00A896;
	--build-chat-colors-brand-subtle: #00B8A5;
	--build-chat-colors-text-inverted: #ffffff;
	--build-chat-colors-text-primary: #1A1A18;
	--build-chat-colors-text-secondary: #1A1A18;
	--build-chat-colors-text-tertiary: #6B6B66;
}

.dark {
	--destructive:
		#C44536;
	--border:
		rgba(255, 255, 255, 0.1);
	--input:
		#2A2A28;
	--ring:
		#00A896;

	--build-chat-colors-bg-1: #1A1A18;
	--build-chat-colors-bg-2: #222220;
	--build-chat-colors-bg-3: #2A2A28;
	--build-chat-colors-bg-4: #3A3A38;
	--build-chat-colors-border-primary: rgba(255, 255, 255, 0.1);
	--build-chat-colors-border-secondary: rgba(255, 255, 255, 0.08);
	--build-chat-colors-border-tertiary: rgba(255, 255, 255, 0.05);
	--build-chat-colors-danger: #C44536;
	--build-chat-colors-brand-heavy: #00B8A5;
	--build-chat-colors-brand-primary: #00A896;
	--build-chat-colors-brand-subtle: #009688;
	--build-chat-colors-text-inverted: #1A1A18;
	--build-chat-colors-text-primary: #F8F8F6;
	--build-chat-colors-text-secondary: #E0E0DE;
	--build-chat-colors-text-tertiary: #9A9A96;

	--shadow-dialog:
		0px 18px 60px 0px rgba(0, 0, 0, 0.3),
		3px 3px 13px 0px rgba(0, 0, 0, 0.2),
		0px 0px 0px 1px rgba(255, 255, 255, 0.05);
	--shadow-elevation:
		6px 6px 13px 0px rgba(0, 0, 0, 0.3),
		24px 24px 24px 0px rgba(0, 0, 0, 0.25),
		0px 0px 0px 1px rgba(255, 255, 255, 0.05);
}

@layer base {
	* {
		@apply border-border-primary outline-ring/50;
	}
  	body {
    	@apply bg-health-bg text-health-dark font-sans font-light antialiased h-full;
		background: linear-gradient(180deg, #F8F8F6 0%, #F2F2EE 100%);
		min-height: 100vh;
	}
	.dark body {
		background: linear-gradient(180deg, #2A2A28 0%, #1A1A18 100%);
	}
	h1, h2, h3, h4, h5, h6 {
		@apply font-serif font-normal;
	}
	strong, b {
		@apply font-medium;
	}
	button {
		@apply cursor-pointer;
	}
	select {
		@apply cursor-pointer;
	}
}

@theme {
	--font-sans:
		'DM Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
		'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
	--font-serif:
		'Instrument Serif', Georgia, serif;
	--font-mono:
		'JetBrains Mono', 'Fira Code', monospace;

	--color-brand: #00A896;
	--color-text: #1A1A18;
	--color-text-on-brand: #fff;

	--shadow-dialog:
		0px 18px 60px 0px rgba(6, 6, 5, 0.1),
		3px 3px 13px 0px rgba(0, 0, 0, 0.04), -3px 3px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		-24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--shadow-elevation:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--shadow-soft-layered:
		3px 3px 13px 0px rgba(0, 0, 0, 0.04), 24px 24px 24px 0px rgba(0, 0, 0, 0.03);
}

/* Neumorphic Design System Keyframes */
@keyframes siriWave {
	0%, 100% { height: 8px; opacity: 0.4; }
	50% { height: 28px; opacity: 1; }
}

@keyframes fadeUp {
	from { opacity: 0; transform: translateY(20px); }
	to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
	from { opacity: 0; transform: scale(0.95); }
	to { opacity: 1; transform: scale(1); }
}

@keyframes float {
	0%, 100% { transform: translateY(0); }
	50% { transform: translateY(-6px); }
}

/* Neumorphic Component Styles */
@layer components {
	.neu-card {
		background: linear-gradient(145deg, #FFFFFF, #ECECEA);
		box-shadow: 12px 12px 24px rgba(0,0,0,0.06), -12px -12px 24px rgba(255,255,255,0.95);
		@apply rounded-24px border border-white/60 transition-all duration-300 ease-out;
	}
	.neu-card:hover {
		transform: translateY(-4px);
		box-shadow: 16px 16px 32px rgba(0,0,0,0.08), -12px -12px 24px rgba(255,255,255,0.95);
	}

	.neu-card-soft {
		background: linear-gradient(145deg, #FAFAFA, #F0F0EE);
		box-shadow: 8px 8px 20px rgba(0,0,0,0.04), -8px -8px 20px rgba(255,255,255,0.9);
		@apply rounded-20px border border-white/40 transition-all duration-300 ease-out;
	}

	.neu-inset {
		background: #F4F4F2;
		box-shadow: inset 4px 4px 12px rgba(0,0,0,0.04), inset -4px -4px 12px rgba(255,255,255,0.7);
		@apply rounded-2xl border border-transparent transition-all duration-200;
	}
	.neu-inset:focus-within {
		background: #FFFFFF;
		border-color: transparent;
	}

	.neu-btn {
		background: linear-gradient(145deg, #00B8A5, #009688);
		box-shadow: 6px 6px 16px rgba(0,168,150,0.3), -2px -2px 8px rgba(255,255,255,0.1);
		@apply text-white font-sans tracking-wide transition-all duration-200 rounded-xl px-6 py-3 font-medium border-none cursor-pointer;
	}
	.neu-btn:hover {
		filter: brightness(1.05);
		transform: translateY(-1px);
	}
	.neu-btn:active {
		transform: scale(0.97);
		box-shadow: inset 2px 2px 8px rgba(0,0,0,0.1);
	}

	.neu-btn-secondary {
		background: linear-gradient(145deg, #FFFFFF, #ECECEA);
		box-shadow: 6px 6px 16px rgba(0,0,0,0.05), -2px -2px 8px rgba(255,255,255,0.8);
		@apply text-health-dark font-sans tracking-wide transition-all duration-200 rounded-xl px-6 py-3 font-medium border border-transparent cursor-pointer;
	}
	.neu-btn-secondary:hover {
		border-color: rgba(0,0,0,0.05);
		transform: translateY(-1px);
	}
	.neu-btn-secondary:active {
		transform: scale(0.97);
		background: #ECECEA;
	}

	.neu-btn-ghost {
		@apply bg-transparent text-health-text-sub rounded-xl transition-all duration-200 border-none cursor-pointer;
	}
	.neu-btn-ghost:hover {
		background: rgba(0,0,0,0.05);
		@apply text-health-dark;
	}

	.neu-icon-btn {
		background: linear-gradient(145deg, #FFFFFF, #ECECEA);
		box-shadow: 5px 5px 10px rgba(0,0,0,0.05), -5px -5px 10px rgba(255,255,255,0.8);
		@apply flex items-center justify-center rounded-xl text-health-dark transition-all duration-200 w-10 h-10 border-none cursor-pointer;
	}
	.neu-icon-btn:active {
		transform: scale(0.95);
		box-shadow: inset 2px 2px 6px rgba(0,0,0,0.05);
	}
}


/* Hack from https://stackoverflow.com/a/71876526 */
.monaco-editor {
	position: absolute !important;
}

@utility bg-graph-paper {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

::-webkit-scrollbar {
	width: 8px;
	height: 8px;
	background-color: transparent;
}

::-webkit-scrollbar-thumb {
	background-color: rgba(0, 0, 0, 0.2);
	border-radius: 4px;
	transition: background-color 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
	background-color: rgba(0, 0, 0, 0.3);
}

.dark ::-webkit-scrollbar-thumb {
	background-color: rgba(255, 255, 255, 0.2);
}

.dark ::-webkit-scrollbar-thumb:hover {
	background-color: rgba(255, 255, 255, 0.3);
}

::-webkit-scrollbar-corner {
	background-color: transparent;
}

/* Phase Timeline Custom Scrollbar */
.phase-timeline-scroll::-webkit-scrollbar {
	width: 6px;
}

.phase-timeline-scroll::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.05);
	border-radius: 3px;
}

.phase-timeline-scroll::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.2);
	border-radius: 3px;
}

.phase-timeline-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.3);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-track {
	background: rgba(255, 255, 255, 0.05);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.2);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.3);
}

.a-tag a {
	@apply text-brand;
}

.prose {
	/* --tw-prose-invert-counters: rgb(156, 187, 192); */
	/* --tw-prose-invert-bullets: rgb(156, 187, 192); */
	--tw-prose-th-headers: --value(var(--color-text));
	--tw-prose-body: --value(var(--color-text));
	--tw-prose-headings: --value(var(--color-text));
	--tw-prose-code: --value(var(--color-text));
	--tw-prose-bold: --value(var(--color-text));
	--tw-prose-quotes: --value(var(--color-text));
	--tw-prose-counters: --value(var(--color-text));
}

/* Chat messages custom scrollbar */
.chat-messages-scroll::-webkit-scrollbar {
	width: 8px;
}

.chat-messages-scroll::-webkit-scrollbar-track {
	background: transparent;
}

.chat-messages-scroll::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.1);
	border-radius: 4px;
}

.chat-messages-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.15);
}

.dark .chat-messages-scroll::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.15);
}

.dark .chat-messages-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.2);
}

/* Terminal custom scrollbar */
.terminal-scroll::-webkit-scrollbar {
	width: 8px;
}

.terminal-scroll::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.05);
	border-radius: 4px;
}

.terminal-scroll::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.15);
	border-radius: 4px;
	transition: background-color 0.2s ease;
}

.terminal-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.25);
}

.dark .terminal-scroll::-webkit-scrollbar-track {
	background: rgba(255, 255, 255, 0.05);
}

.dark .terminal-scroll::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.15);
}

.dark .terminal-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.25);
}

/* Hide scrollbar but keep scroll behavior */
.no-scrollbar {
-ms-overflow-style: none; /* IE and Edge */
scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
display: none; /* Chrome, Safari, Opera */
}